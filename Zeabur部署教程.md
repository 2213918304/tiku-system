# 🚀 Zeabur 部署教程（中文平台，国内快速访问）

## ⭐ 为什么选择Zeabur？

- ✅ **中文界面** - 操作简单易懂
- ✅ **国内访问快** - 服务器在国内，速度极快
- ✅ **一键部署** - 比Railway更简单
- ✅ **新用户送$5** - 可以免费体验
- ✅ **按量计费** - 小项目每月约￥10-30

---

## 📋 部署流程（10分钟完成）

### 第一步：准备GitHub仓库

#### 1.1 初始化Git仓库
```bash
# 在项目根目录执行
cd E:\Project\TIKU

git init
git add .
git commit -m "准备部署到Zeabur"
```

#### 1.2 推送到GitHub

**方法A：GitHub Desktop（推荐新手）**
```
1. 下载安装 GitHub Desktop
   https://desktop.github.com/

2. 打开软件，登录GitHub账号

3. File → Add Local Repository
   选择 E:\Project\TIKU

4. Publish Repository
   - 仓库名：tiku-system
   - 取消勾选 "Keep this code private"（如果是私有项目就勾选）
   - 点击 Publish Repository
```

**方法B：命令行**
```bash
# 1. 在GitHub上创建新仓库
# 访问 https://github.com/new
# 仓库名：tiku-system

# 2. 关联并推送
git remote add origin https://github.com/你的用户名/tiku-system.git
git branch -M main
git push -u origin main
```

---

### 第二步：注册Zeabur账号

1. **访问Zeabur官网**
   ```
   https://zeabur.com
   ```

2. **注册/登录**
   ```
   点击右上角 "登录"
   选择 "使用GitHub登录"（推荐）
   或 "使用邮箱注册"
   ```

3. **验证账号**
   ```
   如果是新用户，会获得 $5 免费额度
   ```

---

### 第三步：创建项目

#### 3.1 创建新项目
```
1. 点击控制台左上角 "创建项目"
2. 输入项目名称：辽师大题库系统
3. 选择区域：推荐选择 "上海" 或 "香港"
4. 点击 "创建"
```

#### 3.2 添加Git服务
```
1. 在项目页面点击 "创建服务"
2. 选择 "Git"
3. 选择 "GitHub"
4. 授权Zeabur访问GitHub（如果首次使用）
5. 选择你的仓库 "tiku-system"
6. 点击 "导入"
```

#### 3.3 等待自动部署
```
Zeabur会自动：
- 检测到Dockerfile
- 开始构建镜像
- 部署应用

构建时间：约 5-8 分钟
```

---

### 第四步：添加MySQL数据库

#### 4.1 创建数据库服务
```
1. 在同一个项目中点击 "创建服务"
2. 选择 "市场"
3. 找到并点击 "MySQL"
4. 配置：
   - 版本：8.0（默认）
   - 数据库名：tiku
   - 用户名：root
   - 密码：自动生成（记下来）
5. 点击 "部署"
```

#### 4.2 获取数据库连接信息
```
1. 点击MySQL服务卡片
2. 切换到 "连接" 标签
3. 找到以下信息：
   - 主机地址（内网）：mysql.zeabur.internal
   - 端口：3306
   - 数据库名：tiku
   - 用户名：root
   - 密码：[自动生成的密码]
```

---

### 第五步：配置环境变量

#### 5.1 添加应用环境变量
```
1. 点击你的应用服务（tiku-system）
2. 切换到 "变量" 标签
3. 点击 "添加变量"
4. 添加以下变量：
```

**必需的环境变量：**
```bash
# 数据库配置
DATABASE_URL=jdbc:mysql://mysql.zeabur.internal:3306/tiku?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
DATABASE_USERNAME=root
DATABASE_PASSWORD=[你的MySQL密码，从上一步获取]

# JWT密钥（重要：务必修改）
JWT_SECRET=your-super-secret-key-please-change-this-to-random-string

# 端口配置
PORT=8080
```

**可选的环境变量：**
```bash
# 管理员账号
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123
ADMIN_EMAIL=admin@tiku.com

# AI配置（如需要AI判题）
AI_API_KEY=你的硅基流动API密钥

# 文件上传路径
UPLOAD_PATH=/app/uploads
TEMP_PATH=/app/temp
```

#### 5.2 保存并重新部署
```
1. 点击 "保存"
2. Zeabur会自动重新部署应用
3. 等待约2-3分钟
```

---

### 第六步：配置域名

#### 6.1 生成域名
```
1. 在应用服务页面
2. 切换到 "域名" 标签
3. 点击 "生成域名"
4. Zeabur会自动分配一个域名
   例如：xxx.zeabur.app
5. 或者绑定自定义域名（需要自己有域名）
```

#### 6.2 启用HTTPS
```
Zeabur自动为所有域名启用HTTPS
无需额外配置
```

---

### 第七步：初始化数据库

#### 7.1 连接到MySQL
```
方法A：使用Zeabur内置工具
1. 点击MySQL服务
2. 切换到 "控制台" 标签
3. 输入SQL命令

方法B：使用本地MySQL客户端
1. 下载Navicat、MySQL Workbench等工具
2. 使用Zeabur提供的公网连接信息
3. 连接数据库
```

#### 7.2 执行初始化SQL
```sql
-- 复制项目中的 src/main/resources/db/init.sql 内容
-- 粘贴到SQL编辑器
-- 点击执行

-- 或者手动创建表（系统会自动创建，因为配置了ddl-auto: update）
```

---

### 第八步：访问系统

#### 8.1 打开应用
```
1. 访问你的Zeabur域名
   例如：https://xxx.zeabur.app

2. 等待应用启动（首次可能需要30秒）

3. 看到登录页面即成功！
```

#### 8.2 登录测试
```
使用默认管理员账号：
用户名：admin
密码：admin123

或者注册新账号
```

---

## 🎯 部署完成检查清单

- [ ] ✅ 应用服务状态显示 "运行中"
- [ ] ✅ MySQL服务状态显示 "运行中"
- [ ] ✅ 能访问域名打开首页
- [ ] ✅ 能注册/登录账号
- [ ] ✅ 能看到题库列表
- [ ] ✅ 能正常答题

**全部打勾？恭喜部署成功！🎉**

---

## 🔧 高级配置

### 1. 查看日志
```
1. 点击应用服务
2. 切换到 "日志" 标签
3. 实时查看应用运行日志
4. 可以筛选错误日志
```

### 2. 配置自动部署
```
Zeabur默认启用自动部署
每次push到GitHub，会自动触发部署

如需关闭：
1. 服务设置 → 部署
2. 关闭 "自动部署"
```

### 3. 配置资源限制
```
1. 点击应用服务
2. 切换到 "资源" 标签
3. 调整：
   - CPU：0.5-2核（推荐1核）
   - 内存：512MB-2GB（推荐1GB）
   - 磁盘：1GB-10GB（推荐2GB）
```

### 4. 数据库备份
```
1. 点击MySQL服务
2. 切换到 "备份" 标签
3. 点击 "创建备份"
4. 或配置自动备份计划
```

### 5. 自定义域名
```
1. 准备你的域名（如 tiku.yourdomain.com）
2. 在Zeabur添加自定义域名
3. 按提示配置DNS记录：
   - 类型：CNAME
   - 名称：tiku
   - 值：xxx.zeabur.app
4. 等待DNS生效（5-30分钟）
```

---

## 💰 费用说明

### 计费规则
```
Zeabur按使用量计费：
- CPU时间
- 内存使用
- 网络流量
- 存储空间
```

### 预估费用（小型项目）
```
配置：1核CPU + 1GB内存 + MySQL
访问量：< 1000次/天

预计费用：
- 新用户：前$5免费（约1-2周）
- 之后：约 ￥15-30/月

优化建议：
- 合理配置资源
- 避免过度日志输出
- 定期清理临时文件
```

### 充值方式
```
1. 点击右上角头像
2. 选择 "账户"
3. 点击 "充值"
4. 支持：
   - 支付宝
   - 微信支付
   - 信用卡
```

---

## 🐛 常见问题

### Q1: 部署失败怎么办？
```
1. 查看构建日志
   服务 → 部署 → 点击失败的部署 → 查看日志

2. 常见原因：
   - Dockerfile语法错误
   - 依赖下载失败
   - 内存不足

3. 解决方法：
   - 检查Dockerfile
   - 重新部署
   - 增加资源配置
```

### Q2: 应用启动慢？
```
可能原因：
- 冷启动需要时间
- 资源配置较低
- 数据库连接慢

解决方法：
- 配置健康检查
- 增加资源（CPU/内存）
- 优化应用启动速度
```

### Q3: 数据库连接失败？
```
检查清单：
1. MySQL服务是否正常运行
2. 环境变量DATABASE_URL是否正确
3. 使用内网地址：mysql.zeabur.internal
4. 密码是否正确
5. 端口是否为3306
```

### Q4: 访问速度慢？
```
可能原因：
- 用户地区离服务器远
- 网络波动

解决方法：
- 选择离用户近的区域
- 使用CDN加速（如Cloudflare）
- 优化前端资源
```

### Q5: 免费额度用完了？
```
选项1：充值
- 最低充值 ￥10
- 按实际使用扣费

选项2：优化使用
- 降低资源配置
- 减少日志输出
- 暂停不用的服务

选项3：转到其他平台
- Railway（每月$5免费）
- 本地部署（完全免费）
```

---

## 📊 监控和维护

### 1. 监控指标
```
在Zeabur控制台可以查看：
- CPU使用率
- 内存使用量
- 网络流量
- 磁盘IO
- 响应时间
```

### 2. 设置告警
```
1. 服务 → 监控
2. 点击 "添加告警"
3. 配置告警条件：
   - CPU > 80%
   - 内存 > 90%
   - 错误率 > 5%
4. 设置通知方式（邮件/微信）
```

### 3. 定期维护
```
建议每周/每月：
- 查看日志，排查错误
- 检查资源使用情况
- 备份数据库
- 更新依赖版本
- 检查安全漏洞
```

---

## 🎓 学习资源

### 官方文档
- Zeabur文档：https://zeabur.com/docs
- API参考：https://zeabur.com/docs/api

### 视频教程
- Zeabur部署教程：https://www.bilibili.com/（搜索"Zeabur部署"）
- Docker基础：https://www.bilibili.com/（搜索"Docker教程"）

### 社区支持
- Zeabur Discord：https://discord.gg/zeabur
- GitHub Discussions：在项目仓库创建讨论

---

## 📝 快速命令参考

### Zeabur CLI（可选）
```bash
# 安装CLI
npm i -g @zeabur/cli

# 登录
zeabur auth login

# 部署
zeabur deploy

# 查看日志
zeabur logs

# 查看服务状态
zeabur service list
```

---

## 🎉 恭喜完成部署！

### 下一步操作

1. **修改默认密码**
   ```
   登录 → 个人中心 → 修改密码
   ```

2. **导入题库数据**
   ```
   管理后台 → 数据导入 → 上传Excel文件
   ```

3. **配置系统设置**
   ```
   管理后台 → 系统设置 → 基础设置
   ```

4. **创建题库和章节**
   ```
   管理后台 → 题库管理 → 创建题库
   ```

5. **邀请用户使用**
   ```
   分享你的域名给用户
   ```

---

## 🆚 Zeabur vs Railway 对比

| 特性 | Zeabur | Railway |
|------|---------|---------|
| **价格** | 按量计费，约￥15-30/月 | 免费$5/月 |
| **界面** | 中文 ✅ | 英文 |
| **国内速度** | 快 ✅ | 一般 |
| **部署速度** | 5-8分钟 | 5-8分钟 |
| **资源配置** | 灵活 | 固定 |
| **数据库** | 独立收费 | 包含在$5内 |
| **适合人群** | 国内用户 | 全球用户 |

### 我的建议
```
测试阶段：Railway（免费）
正式运营：Zeabur（国内快）
预算有限：本地部署
```

---

## 💪 优化建议

### 1. 性能优化
```
- 启用Redis缓存
- 使用CDN加速静态资源
- 优化数据库查询
- 配置Gzip压缩
```

### 2. 安全优化
```
- 修改默认密码
- 配置防火墙规则
- 启用HTTPS（已默认）
- 定期更新依赖
```

### 3. 成本优化
```
- 合理配置资源
- 清理无用数据
- 压缩日志文件
- 使用图片CDN
```

---

**祝你部署成功！有问题随时问我！** 🚀

